# Distributed Network Messaging Protocol #

Коммерческое использование только с разрешения автора.<br>
При использовании необходимо явно указывать ссылку на источник.<br>
<p>Sergey Bodrov, 2010-04-08</p>

<h1>Сервисы</h1>

<h2>Описание</h2>

<p>Сервисы служат для обеспечения различного пользовательского функционала - групповых чатов (каналов), форумов, блогов, поиска файлов, итд.. Сервисы обеспечиваются узлами. Узел, предоставляющий сервис, считается сервером. Клиенты могут пользоваться сервисами с разных узлов.</p>

<h2>Управление сервисами</h2>

Сервисы управляются командами. Команды имеют вид:<br>
<pre><code>&lt;команда&gt; [аргумент1] [аргумент2] ... [аргументN]</code></pre>
В одном пакете может быть несколько команд, разделенных символами перевода строки.<br>
<br>
<h2>Каталог сервисов</h2>

<p>Каталог сервисов - это список доступных сервисов, которые есть на данном узле. Узел может включать в каталог как свои собственные сервисы, так и сервисы с других узлов (транзитные сервисы). Каталог сервисов сам является сервисом и управляется командами.</p>

<h2>Запросы и подписка</h2>

<p>Сервисы могут работать по запросам и по подписке. Клиент может отправить запрос (команду) на выбранный сервис и получить ответ. В случае подписки на сервис, информация передается клиенту без запроса.</p>
<p>Донор - это узел, который раздает информацию подписчикам. Доноры могут соединяться в цепочки. При недоступности донора подписчик может подключиться к другому донору сервиса.</p>

<h2>Онлайн и оффлайн</h2>

<p>В онлайновом сервисе сообщения доставляются от отправителя до получателя без задержек. Если получатель недоступен или не может принять сообщение за установленное время, то сообщение уничтожается и возвращается сообщение о недоступности получателя.</p>
<p>В оффлайновом сервисе сообщения могут задерживаться по пути следования к получателю и передаваться по мере возможности. Если получатель или промежуточный узел недоступен, то сообщение хранится на крайнем узле некоторое время. Если за это время не удалось передать сообщение, то сообщение уничтожается и возвращается сообщение об ошибке доставки.</p>
<p>Недоставленные оффлайновые сообщения могут накапливаться до некоторого предела. Новые сообщения свыше этого предела замещают самые ранние.</p>

<h2>Локальные и распределенные сервисы</h2>

<p>Локальные сервисы доступны только на одном узле-владельце. Для использования локального сервиса необходимо отправлять запросы по адресу узла-владельца.</p>
<p>Распределенные сервисы доступны на всех узлах-подписчиках. Обмен информацией происходит в обе стороны иерархии подчинения (подписки). Полученную информацию узел отправляет всем своим подписчикам и донорам.</p>

<h1>Описания отдельных сервисов</h1>

<li><a href='https://code.google.com/p/talaria/wiki/auth'>AUTH (Authentication) - Аутентификация</a>
<li><a href='https://code.google.com/p/talaria/wiki/info'>INFO (Information) - Обмен служебной информацией</a>
<li><a href='https://code.google.com/p/talaria/wiki/usrd'>USRD (Users Directory) - Каталог пользователей</a>
<li><a href='https://code.google.com/p/talaria/wiki/srvd'>SRVD (Services Directory) - Каталог сервисов</a>
<li><a href='https://code.google.com/p/talaria/wiki/grpc'>GRPC (Group Chat) - Канал, групповой чат</a>
<li><a href='https://code.google.com/p/talaria/wiki/flst'>FLST (Files Storage) - Хранилище файлов</a>
<li><a href='https://code.google.com/p/talaria/wiki/chat'>CHAT (Short messages) - Чат, короткие сообщения между пользователями</a>
<li><a href='https://code.google.com/p/talaria/wiki/mail'>MAIL (Long messages) - Почта, длинные сообщения между пользователями</a>
<li><a href='https://code.google.com/p/talaria/wiki/foru'>FORU (Forums) - Форумы</a>